/*!
 * Start Bootstrap - SB Admin 2 v4.0.7 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

var is_now_edit=!1;$(document).ready(function(){$("#example").DataTable({ajax:"http://localhost/projects/admin/index.php/UsersManagement/createAjax",columnDefs:[{targets:[0,1,2,3],className:"text-center"},{targets:[3],defaultContent:"<div class='d-flex flex-row justify-content-center align-items-center'><button class='btn btn-danger btn-icon-split mx-2 btn-sm' id='delete'><span class='text'><i class='fas fa-trash'></i></span></button ><button class='btn btn-info btn-icon-split mx-2 btn-sm' id='edit'><span class='text'><i class='fas fa-pen'></span></button></div>"},{orderable:!1,targets:[3]}],columns:[{},{},{targets:[2],data:2,render:function(e,t,n){if("display"===t)switch($.parseJSON(e)){case 1:return"User";case 2:return"Moderator";case 3:return"Administrator";default:return"User"}return e}}]});$("#example tbody").on("click","#confirm",function(){var e=$("#example").DataTable();is_now_edit=!1;var t="id="+e.row($(this).parents("tr")).data()[0],n=new XMLHttpRequest;n.open("POST","http://localhost/projects/admin/index.php/UsersManagement/deleteUser/",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(t),e.ajax.reload()})}),$(document).ready(function(){var t=$("#example").DataTable();$("#example tbody").on("click","#edit",function(){if(!is_now_edit){is_now_edit=!0;for(var e=0;e<$("tr",$(this).parents("tr")).prevObject[0].children.length;e++)if(1==e)$("tr",$(this).parents("tr")).prevObject[0].children[e].innerHTML='<td><input class="form-control" id="nick_edit" value="'+t.row($(this).parents("tr")).data()[e]+'"></td>';else if(2==e){switch(t.row($(this).parents("tr")).data()[e]){case"1":$("tr",$(this).parents("tr")).prevObject[0].children[e].innerHTML="<div class='d-flex flex-row justify-content-center align-items-center'><select class='form-control' id='select_role'><option value='1' selected>User</option><option value='2'>Moderator</option><option value='3'>Administrator</option></select></div>";break;case"2":$("tr",$(this).parents("tr")).prevObject[0].children[e].innerHTML="<div class='d-flex flex-row justify-content-center align-items-center'><select class='form-control' id='select_role'><option value='1'>User</option><option value='2' selected>Moderator</option><option value='3'>Administrator</option></select></div>";break;case"3":$("tr",$(this).parents("tr")).prevObject[0].children[e].innerHTML="<div class='d-flex flex-row justify-content-center align-items-center'><select class='form-control' id='select_role'><option value='1'>User</option><option value='2'>Moderator</option><option value='3' selected>Administrator</option></select></div>";break;default:$("tr",$(this).parents("tr")).prevObject[0].children[e].innerHTML="<div class='d-flex flex-row justify-content-center align-items-center'><select class='form-control' id='select_role'><option value='1' selected>User</option><option value='2'>Moderator</option><option value='3'>Administrator</option></select></div>"}}else 3==e&&($("tr",$(this).parents("tr")).prevObject[0].children[e].innerHTML="<button class='btn btn-success btn-icon-split mx-2 btn-sm' id='save_edit'><span class='text'><i class='fas fa-save'></i></span></button><button class='btn btn-warning btn-icon-split mx-2 btn-sm' id='cancel_edit'><span class='text'><i class='fas fa-times'></i></span></button>")}}),$("#example tbody").on("click","#delete",function(){if(!is_now_edit){is_now_edit=!0;for(var e=0;e<$("tr",$(this).parents("tr")).prevObject[0].children.length;e++)3==e&&($("tr",$(this).parents("tr")).prevObject[0].children[e].innerHTML="<button class='btn btn-success btn-icon-split mx-2 btn-sm' id='confirm'><span class='text'><i class='fas fa-check'></i></span></button><button class='btn btn-warning btn-icon-split mx-2 btn-sm' id='cancel_edit'><span class='text'><i class='fas fa-times'></i></span></button>")}})}),$(document).ready(function(){var n=$("#example").DataTable();$("#example tbody").on("click","#cancel_edit",function(){is_now_edit=!1,n.ajax.reload()});n=$("#example").DataTable();$("#example tbody").on("click","#save_edit",function(){var e="id="+n.row($(this).parents("tr")).data()[0]+"&nick="+$("#nick_edit").val()+"&role="+$("#select_role").children("option:selected").val(),t=new XMLHttpRequest;t.open("POST","http://localhost/projects/admin/index.php/UsersManagement/updateUser/",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(e),is_now_edit=!1,n.ajax.reload()})}),$(document).ready(function(){var n=$("#example").DataTable();$("#add").on("click",function(){$("#addForm").modal("toggle");var e="nick="+$("#nick").val()+"&password="+$("#password").val()+"&role="+$("#select").children("option:selected").val(),t=new XMLHttpRequest;t.open("POST","http://localhost/projects/admin/index.php/UsersManagement/addUser/",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(e),n.ajax.reload(),$("#nick").val(""),$("#password").val("")}),$("#cancel").on("click",function(){$("#nick").val(""),$("#password").val("")})});