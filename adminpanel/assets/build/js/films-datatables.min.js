/*!
 * Start Bootstrap - SB Admin 2 v4.0.7 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

$(document).ready(function(){var n='<button class="btn btn-danger btn-icon-split mx-2 btn-sm" id="delete"><span class="text"><i class="fas fa-trash"></i></span></button>',s='<button class="btn btn-success btn-icon-split mx-2 btn-sm" id="show_edit_modal" data-toggle="modal" data-target="#EditModal"><span class="text"><i class="fas fa-pen"></i></span></button>',i='<button class="btn btn-primary btn-icon-split mx-2 btn-sm" id="visible"><span class="text"><i class="fas fa-eye"></i></span></button>',l=n+s+i,d='<div class="d-flex flex-row justify-content-center align-items-center td.details-control">'+l+"</div>";function o(){try{Request=new XMLHttpRequest}catch(t){Request=!1}return Request}var r=$("#example").DataTable({ajax:"http://unknownriders.pl/adminpanel/index.php/FilmsController/createAjax",columns:[{data:"id"},{data:"title"},{data:"link"},{data:"add_by",searchable:!1},{data:"visible",render:function(t,e,a){if(1==a.visible)return console.log(a.visible),console.log("1"),d='<div class="d-flex flex-row justify-content-center align-items-center td.details-control">'+(l=n+s+(i='<button disabled class="btn btn-light btn-icon-split mx-2 btn-sm" id="visible"><span class="text"><i class="fas fa-eye text-primary"></i></span></button>'))+"</div>"},className:"details-control dt-center",orderable:!1,searchable:!1,defaultContent:d}],order:[[0,"desc"]]});$("#example tbody ").on("click","#show_edit_modal",function(){var t=$(this).closest("tr").first("i.fas"),e=r.row(t);$("#EditModal #exampleModalLabel").text(" "+e.data().title),$("#EditModal #title").val(e.data().title),$("#EditModal #link").val(e.data().link),$("#EditModal #added_by").val(e.data().add_by),id=r.row(t).data().id,$("#save_edit").on("click",function(){var t=$("#EditModal #title").val(),e=$("#EditModal #link").val(),a=$("#EditModal #added_by").val(),n="id="+id+"&title="+t+"&link="+e+"&addby="+a,s=new o;s.open("POST","http://unknownriders.pl/adminpanel/index.php/FilmsController/updateFilm",!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(n),s.onreadystatechange=function(){4==this.readyState&&(200==this.status?r.ajax.reload():alert("Błąd komunikacji z serwerem: E:Con.Status "+this.statusText))}})}),$("#example tbody ").on("click","#delete",function(){var t=$(this).closest("tr"),e=t.first("i.fas");t.find("span.text i.fas"),r.row(e);t.find("td.details-control").children().html("<button class='btn btn-success btn-icon-split mx-2 btn-sm' id='confirm'><span class='text'><i class='fas fa-check'></i></span></button><button class='btn btn-warning btn-icon-split mx-2 btn-sm' id='cancel_edit'><span class='text'><i class='fas fa-times'></i></span></button>"),$("#example tbody ").on("click","#confirm",function(){var t=$(this).closest("tr").first("i.fas"),e="id="+r.row(t).data().id,a=new o;a.open("POST","http://unknownriders.pl/adminpanel/index.php/FilmsController/deleteFilm",!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(e),a.onreadystatechange=function(){4==this.readyState&&(200==this.status?r.ajax.reload():alert("Błąd komunikacji z serwerem: E:Con.Status "+this.statusText))}}),$("#example tbody ").on("click","#cancel_edit",function(){r.ajax.reload()})}),$("#add").on("click",function(){var t="title="+$("#title").val()+"&link="+$("#link").val()+"&addby="+$("#user_nick").text(),e=new o;e.open("POST","http://unknownriders.pl/adminpanel/index.php/FilmsController/addFilm",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(t),e.onreadystatechange=function(){4==this.readyState&&(200==this.status?r.ajax.reload():alert("Błąd komunikacji z serwerem: E:Con.Status "+this.statusText))}}),$("#example tbody").on("click","#visible",function(){var t=$(this).closest("tr").first("i.fas"),e="id="+r.row(t).data().id,a=new o;a.open("POST","http://unknownriders.pl/adminpanel/index.php/FilmsController/MakeVisible",!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(e),a.onreadystatechange=function(){4==this.readyState&&(200==this.status?r.ajax.reload():alert("Błąd komunikacji z serwerem: E:Con.Status "+this.statusText))}})});