/*!
 * Start Bootstrap - SB Admin 2 v4.0.7 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

function format(t){var a,e;return e=""==t.comment?a="":(a="<th>Komentarz:</th>","<td>"+t.comment+"</td>"),'<table class="table table-bordered table-hover" cellpadding = "5" cellspacing = "0" border = "0" style = "padding-left:50px;"><tr><th>Zarobione:</th><th>Wydane:</th><th>Różnica:</th>'+a+"<tr><td>"+t.earned+"</td><td>"+t.spent+"</td><td>"+t.difference+"</td>"+e+"</tr></table>"}var is_now_edit=!1;$(document).ready(function(){var p=$("#example").DataTable({ajax:"http://unknownriders.pl/adminpanel/index.php/PlayersController/createAjax",columns:[{data:"id"},{data:"discord_code"},{data:"game_nick"},{data:"level",searchable:!1},{data:"join_date"},{data:"add_by",searchable:!1},{className:"details-control dt-center",orderable:!1,searchable:!1,data:null,defaultContent:"<div class='d-flex flex-row justify-content-center align-items-center td.details-control'><button class='btn btn-danger btn-icon-split mx-2 btn-sm' id='delete'><span class='text'><i class='fas fa-trash'></i></span></button><button class='btn btn-success btn-icon-split mx-2 btn-sm' id='show_edit_modal' data-toggle='modal' data-target='#EditModal'><span class='text'><i class='fas fa-pen'></i></span></button><button class='btn btn-info btn-icon-split mx-2 btn-sm' id='showMore'><span class='text'><i class='fas text-light fa-chevron-down'></span></button></div>"}],order:[[0,"desc"]]});$("#example tbody ").on("click","#showMore",function(){var t=$(this).closest("tr"),a=t.last("i.fas"),e=t.find("span.text i.fas"),n=p.row(a);n.child.isShown()?(n.child.hide(),t.removeClass("shown"),e.last().removeClass("fa-chevron-up"),e.last().addClass("fa-chevron-down")):(n.child(format(n.data())).show(),t.addClass("shown"),e.last().removeClass("fa-chevron-down"),e.last().addClass("fa-chevron-up"))}),$("#example tbody ").on("click","#show_edit_modal",function(){var t=$(this).closest("tr").first("i.fas"),a=p.row(t);console.log($("#EditModal #exampleModalLabel").text("text")),$("#EditModal #exampleModalLabel").text("Edycja gracza"+a.data().game_nick),$("#EditModal #nick").val(a.data().game_nick),$("#EditModal #discord").val(a.data().discord_code),$("#EditModal #level").val(a.data().level),$("#EditModal #earned").val(a.data().earned),$("#EditModal #spent").val(a.data().spent),$("#EditModal #difference").val(a.data().difference),$("#EditModal #join").val(a.data().join_date),$("#EditModal #comment").val(a.data().comment),$("#EditModal #addby").val(a.data().add_by),id=p.row(t).data().id,$("#save_edit").on("click",function(){var t=$("#EditModal #nick").val(),a=$("#EditModal #discord").val(),e=$("#EditModal #level").val(),n=$("#EditModal #earned").val(),d=$("#EditModal #spent").val(),s=$("#EditModal #difference").val(),l=$("#EditModal #join").val(),o=$("#EditModal #comment").val(),i=$("#EditModal #addby").val(),c="id="+id+"&nick="+t+"&code="+a+"&lvl="+e+"&earned="+n+"&spent="+d+"&difference="+s+"&join="+l+"&comment="+o+"&addby="+i,r=new function(){try{r=new XMLHttpRequest}catch(t){r=!1}return r};r.open("POST","http://unknownriders.pl/adminpanel/index.php/PlayersController/updatePlayer/",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(c),r.onreadystatechange=function(){4==this.readyState&&(200==this.status?p.ajax.reload():alert("Błąd komunikacji z serwerem: E:Con.Status "+this.statusText))}})}),$("#example tbody ").on("click","#delete",function(){var t=$(this).closest("tr"),a=t.first("i.fas");t.find("span.text i.fas"),p.row(a);t.find("td.details-control").children().html("<button class='btn btn-success btn-icon-split mx-2 btn-sm' id='confirm'><span class='text'><i class='fas fa-check'></i></span></button><button class='btn btn-warning btn-icon-split mx-2 btn-sm' id='cancel_edit'><span class='text'><i class='fas fa-times'></i></span></button>"),$("#example tbody ").on("click","#confirm",function(){var t=$(this).closest("tr").first("i.fas"),a=p.row(t);console.log(a.data().id);var e="id="+a.data().id,n=new function(){try{n=new XMLHttpRequest}catch(t){n=!1}return n};n.open("POST","http://unknownriders.pl/adminpanel/index.php/PlayersController/deletePlayer/",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(e),n.onreadystatechange=function(){4==this.readyState&&(200==this.status?p.ajax.reload():alert("Błąd komunikacji z serwerem: E:Con.Status "+this.statusText))}}),$("#example tbody ").on("click","#cancel_edit",function(){t.find("td.details-control").children().html("<button class='btn btn-danger btn-icon-split mx-2 btn-sm' id='delete'><span class='text'><i class='fas fa-trash'></i></span></button><button class='btn btn-success btn-icon-split mx-2 btn-sm' id='show_edit_modal' data-toggle='modal' data-target='#EditModal'><span class='text'><i class='fas fa-pen'></i></span></button><button class='btn btn-info btn-icon-split mx-2 btn-sm' id='showMore'><span class='text'><i class='fas text-light fa-chevron-down'></span></button>")})}),$("#add").on("click",function(){var t="nick="+$("#nick").val()+"&code="+$("#discord").val()+"&lvl="+$("#level").val()+"&earned="+$("#earned").val()+"&spent="+$("#spent").val()+"&comment="+$("#comment").val()+"&addby="+$("#user_nick").text(),a=new function(){try{a=new XMLHttpRequest}catch(t){a=!1}return a};a.open("POST","http://unknownriders.pl/adminpanel/index.php/PlayersController/addPlayer/",!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4==this.readyState&&(200==this.status?p.ajax.reload():alert("Błąd komunikacji z serwerem: E:Con.Status "+this.statusText))},a.send(t)})});