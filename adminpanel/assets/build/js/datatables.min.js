/*!
 * Start Bootstrap - SB Admin 2 v4.0.7 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

var is_now_edit=!1;$(document).ready(function(){$("#example").DataTable({ajax:"http://localhost/projects/admin/index.php/UsersManagement/createAjax",columnDefs:[{targets:[0,1,2,3,4],className:"text-center"},{targets:[4],defaultContent:"<div class='d-flex flex-row justify-content-center align-items-center'><button class='btn btn-danger btn-icon-split mx-2 btn-sm' id='delete'><span class='text'><i class='fas fa-trash'></i></span></button ><button class='btn btn-info btn-icon-split mx-2 btn-sm' id='edit'><span class='text'><i class='fas fa-pen-square'></span></button></div>"},{orderable:!1,targets:[4]}],columns:[{},{},{},{targets:[3],data:3,render:function(t,e,n){if(console.log(n[3]),"display"===e)switch($.parseJSON(t)){case 2:return"Moderator";case 3:return"Administrator";default:return"User"}return t}}]});$("#example tbody").on("click","#confirm",function(){var t=$("#example").DataTable();is_now_edit=!1;var e="id="+t.row($(this).parents("tr")).data()[0],n=new XMLHttpRequest;n.open("POST","http://localhost/projects/admin/index.php/UsersManagement/deleteUser/",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(e),t.ajax.reload()})}),$(document).ready(function(){var e=$("#example").DataTable();$("#example tbody").on("click","#edit",function(){if(!is_now_edit){is_now_edit=!0;for(var t=0;t<$("tr",$(this).parents("tr")).prevObject[0].children.length;t++)if(1==t)$("tr",$(this).parents("tr")).prevObject[0].children[t].innerHTML='<td><input class="form-control" id="first_edit" value="'+e.row($(this).parents("tr")).data()[t]+'"></td>';else if(2==t)$("tr",$(this).parents("tr")).prevObject[0].children[t].innerHTML='<td><input class="form-control" id="last_edit" value="'+e.row($(this).parents("tr")).data()[t]+'"></td>';else if(3==t){switch(e.row($(this).parents("tr")).data()[t]){case"2":$("tr",$(this).parents("tr")).prevObject[0].children[t].innerHTML="<div class='d-flex flex-row justify-content-center align-items-center'><select class='form-control' id='select'><option value='1' selected>User</option><option value='2'>Moderator</option><option value='3'>Administrator</option></select></div>";break;case"2":$("tr",$(this).parents("tr")).prevObject[0].children[t].innerHTML="<div class='d-flex flex-row justify-content-center align-items-center'><select class='form-control' id='select'><option value='1'>User</option><option value='2' selected>Moderator</option><option value='3'>Administrator</option></select></div>";break;case"3":$("tr",$(this).parents("tr")).prevObject[0].children[t].innerHTML="<div class='d-flex flex-row justify-content-center align-items-center'><select class='form-control' id='select'><option value='1'>User</option><option value='2'>Moderator</option><option value='3' selected>Administrator</option></select></div>";break;default:$("tr",$(this).parents("tr")).prevObject[0].children[t].innerHTML="<div class='d-flex flex-row justify-content-center align-items-center'><select class='form-control' id='select'><option value='1' selected>User</option><option value='2'>Moderator</option><option value='3'>Administrator</option></select></div>"}}else 4==t&&($("tr",$(this).parents("tr")).prevObject[0].children[t].innerHTML="<button class='btn btn-success btn-icon-split mx-2 btn-sm' id='save_edit'><span class='text'><i class='fas fa-save'></i></span></button><button class='btn btn-warning btn-icon-split mx-2 btn-sm' id='cancel_edit'><span class='text'><i class='fas fa-times'></i></span></button>")}}),$("#example tbody").on("click","#delete",function(){if(!is_now_edit){is_now_edit=!0;for(var t=0;t<$("tr",$(this).parents("tr")).prevObject[0].children.length;t++)4==t&&($("tr",$(this).parents("tr")).prevObject[0].children[t].innerHTML="<button class='btn btn-success btn-icon-split mx-2 btn-sm' id='confirm'><span class='text'><i class='fas fa-check'></i></span></button><button class='btn btn-warning btn-icon-split mx-2 btn-sm' id='cancel_edit'><span class='text'><i class='fas fa-times'></i></span></button>")}})}),$(document).ready(function(){var n=$("#example").DataTable();$("#example tbody").on("click","#cancel_edit",function(){is_now_edit=!1,n.ajax.reload()});n=$("#example").DataTable();$("#example tbody").on("click","#save_edit",function(){var t="id="+n.row($(this).parents("tr")).data()[0]+"&first="+$("#first_edit").val()+"&last="+$("#last_edit").val()+"&role="+$("#select").children("option:selected").val(),e=new XMLHttpRequest;e.open("POST","http://localhost/projects/admin/index.php/UsersManagement/updateUser/",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(t),is_now_edit=!1,alert("Zmiany zosta≈Çy zapisane"),n.ajax.reload()})}),$(document).ready(function(){var n=$("#example").DataTable();$("#add").on("click",function(){$("#addForm").modal("toggle");var t="first="+$("#first").val()+"&last="+$("#last").val(),e=new XMLHttpRequest;e.open("POST","http://localhost/projects/admin/index.php/UsersManagement/addUser/",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(t),n.ajax.reload(),$("#first").val(""),$("#last").val("")}),$("#cancel").on("click",function(){$("#first").val(""),$("#last").val("")})});